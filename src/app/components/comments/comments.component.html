<!-- Testimonials Section -->
<section class="testimonials">
  <div class="container">
    <h2 class="section-title">Сурагчдын сэтгэгдэл</h2>
    <div class="testimonials-grid">
      <div class="testimonial-card" *ngFor="let comment of comments$ | async">
        <div class="testimonial-content">
          <p>{{ comment.content }}</p>
        </div>
        <div class="testimonial-author">
          <h4>{{ comment.name }}</h4>
          <span>{{ comment.role }}</span>
          <div class="rating">
            <span
              *ngFor="let star of rating"
              class="star"
              [class.filled]="star <= comment.rating"
              >★</span
            >
          </div>
          <button (click)="deleteComment(comment.id!)" class="delete-btn">
            Устгах
          </button>
        </div>
      </div>
    </div>
    <!-- Сэтгэгдэл бичих товч -->
    <div class="add-comment-btn">
      <button (click)="toggleForm()">
        {{ showForm ? "Болих" : "Сэтгэгдэл бичих" }}
      </button>
    </div>

    <!-- Form зөвхөн showForm=true үед гарна -->
    <form *ngIf="showForm" (ngSubmit)="addComment()" class="comment-form">
      <textarea
        [(ngModel)]="newComment.content"
        name="content"
        placeholder="Сэтгэгдэл бичих..."
        required
      ></textarea>

      <select [(ngModel)]="newComment.rating" name="rating">
        <option *ngFor="let r of rating" [value]="r">{{ r }}</option>
      </select>

      <button type="submit">Нэмэх</button>
    </form>
  </div>
</section>
