<div class="dashboard">
  <div class="container">
    <!-- Header -->
    <div class="dashboard-header">
      <h1>–•—è–Ω–∞–ª—Ç—ã–Ω —Å–∞–º–±–∞—Ä</h1>
      <p>
        –°–∞–π–Ω –±–∞–π–Ω–∞ —É—É <b>{{ user?.name }}! </b>–¢–∞–Ω—ã —Å—É—Ä–≥–∞–ª—Ç—ã–Ω —è–≤—Ü
      </p>
    </div>

    <!-- Stats Overview -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">üìö</div>
        <div class="stat-content">
          <h3>{{ overallStats.totalCourses }}</h3>
          <p>–ë“Ø—Ä—Ç–≥“Ø“Ø–ª—Å—ç–Ω —Å—É—Ä–≥–∞–ª—Ç</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-content">
          <h3>{{ overallStats.completedCourses }}</h3>
          <p>–î—É—É—Å—Å–∞–Ω —Å—É—Ä–≥–∞–ª—Ç</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üìà</div>
        <div class="stat-content">
          <h3>{{ overallStats.averageProgress }}%</h3>
          <p>–î—É–Ω–¥–∞–∂ —è–≤—Ü</p>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="dashboard-content">
      <!-- Enrolled Courses -->
      <div class="section enrolled-courses">
        <div class="section-header">
          <h2>–ú–∏–Ω–∏–π —Å—É—Ä–≥–∞–ª—Ç—É—É–¥</h2>
          <p>–¢–∞–Ω—ã –±“Ø—Ä—Ç–≥“Ø“Ø–ª—Å—ç–Ω —Å—É—Ä–≥–∞–ª—Ç—É—É–¥—ã–Ω —è–≤—Ü</p>
        </div>

        <div
          class="courses-list"
          *ngIf="enrolledCourses.length > 0; else noCourses"
        >
          <div *ngFor="let course of enrolledCourses" class="course-item">
            <div class="course-image">
              <img
                [src]="course.image"
                [alt]="course.title"
                (error)="onImageError($event)"
              />
            </div>

            <div class="course-info">
              <h3>{{ course.title }}</h3>
              <p class="instructor">–ë–∞–≥—à: {{ course.instructor }}</p>
              <p class="last-accessed">
                –°“Ø“Ø–ª–¥: {{ formatDate(course.lastAccessed) }}
              </p>

              <div class="progress-container">
                <div class="progress-bar">
                  <div
                    class="progress-fill"
                    [style.width.%]="course.progress"
                    [style.background-color]="getProgressColor(course.progress)"
                  ></div>
                </div>
                <span class="progress-text">{{ course.progress }}%</span>
              </div>
            </div>

            <div class="course-actions">
              <button
                (click)="continueCourse(course.id)"
                class="btn btn-primary"
              >
                {{ course.progress === 100 ? "–î–∞—Ö–∏–Ω “Ø–∑—ç—Ö" : "“Æ—Ä–≥—ç–ª–∂–ª“Ø“Ø–ª—ç—Ö" }}
              </button>
            </div>
          </div>
        </div>

        <ng-template #noCourses>
          <div class="empty-state">
            <div class="empty-icon">üìö</div>
            <h3>–ë“Ø—Ä—Ç–≥“Ø“Ø–ª—Å—ç–Ω —Å—É—Ä–≥–∞–ª—Ç –±–∞–π—Ö–≥“Ø–π</h3>
            <p>–°—É—Ä–≥–∞–ª—Ç—ã–Ω –∫–∞—Ç–∞–ª–æ–≥–∞–∞—Å —Å–æ–Ω–≥–æ–Ω –±“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—ç—Ä—ç–π</p>
            <a routerLink="/courses" class="btn btn-primary">–°—É—Ä–≥–∞–ª—Ç —Ö–∞–π—Ö</a>
          </div>
        </ng-template>
      </div>

      <!-- Recommended Courses -->
      <div class="section recommended-courses">
        <div class="section-header">
          <h2>–°–∞–Ω–∞–ª –±–æ–ª–≥–æ—Ö —Å—É—Ä–≥–∞–ª—Ç—É—É–¥</h2>
          <p>–¢–∞–Ω–¥ —Ç–æ—Ö–∏—Ä—Å–æ–Ω —à–∏–Ω—ç —Å—É—Ä–≥–∞–ª—Ç—É—É–¥</p>
        </div>

        <div class="recommended-grid">
          <div
            *ngFor="let course of recommendedCourses"
            class="recommended-card"
          >
            <div class="course-image">
              <img
                [src]="course.image"
                [alt]="course.title"
                (error)="onImageError($event)"
              />
            </div>

            <div class="course-content">
              <h4>{{ course.title }}</h4>
              <p class="instructor">{{ course.instructor }}</p>
              <div class="price">{{ course.price | number }}‚ÇÆ</div>
              <a
                [routerLink]="['/course', course._id]"
                class="btn btn-primary btn-sm"
                >–î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
