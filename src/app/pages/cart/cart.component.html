<div class="cart">
  <div class="container">
    <h1 class="page-header">–¢–∞–Ω—ã —Å–∞–≥—Å</h1>

    <!-- –•–æ–æ—Å–æ–Ω “Ø–µ–¥ -->
    <div *ngIf="items && items.length === 0; else cartList" class="empty-cart">
      <div class="empty-icon">üõí</div>
      <h3>–¢–∞–Ω—ã —Å–∞–≥—Å —Ö–æ–æ—Å–æ–Ω –±–∞–π–Ω–∞</h3>
      <p>–°—É—Ä–≥–∞–ª—Ç—É—É–¥–∞–∞—Å —Å–æ–Ω–∏—Ä—Ö–æ–∂ –±–∞–π–Ω–∞ —É—É?</p>
      <button (click)="routeCourse()" class="btn btn-primary">
        –°—É—Ä–≥–∞–ª—Ç —Ö–∞—Ä–∞—Ö
      </button>
    </div>

    <!-- –•–æ–æ—Å–æ–Ω –±–∏—à “Ø–µ–¥ -->
    <ng-template #cartList>
      <div class="cart-items">
        <div *ngFor="let item of items" class="cart-item">
          <div class="course-image">
            <img [src]="getCourseImageUrl(item.image)" [alt]="item.title" />
          </div>

          <div class="course-info">
            <h3>{{ item.title }}</h3>
            <p class="instructor">–ë–∞–≥—à: {{ item.instructor }}</p>
            <p class="description">{{ item.description }}</p>
            <div class="course-meta">
              <span class="duration">‚è±Ô∏è {{ item.duration }}</span>
              <span class="level" *ngIf="item.details?.[0]?.level"
                >üìä {{ item.details?.[0]?.level }}</span
              >
            </div>
          </div>

          <div class="course-price">
            <span class="price">{{ item.price | number }}‚ÇÆ</span>
          </div>

          <div class="course-actions">
            <button
              (click)="enrollCourse(item._id)"
              class="btn btn-primary"
              [disabled]="loadingId === item._id"
            >
              <span *ngIf="loadingId === item._id">‚è≥</span>
              <span *ngIf="loadingId !== item._id">–ë“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö</span>
            </button>

            <button
              (click)="remove(item._id)"
              class="btn btn-outline btn-sm"
              [disabled]="loadingId === item._id"
            >
              –£—Å—Ç–≥–∞—Ö
            </button>
          </div>
        </div>
      </div>

      <div class="cart-summary">
        <div class="summary-info">
          <p>
            –ù–∏–π—Ç —Å—É—Ä–≥–∞–ª—Ç: <strong>{{ items.length }}</strong>
          </p>
          <p>
            –ù–∏–π—Ç “Ø–Ω—ç: <strong>{{ getTotalPrice() | number }}‚ÇÆ</strong>
          </p>
        </div>

        <div class="summary-actions">
          <button (click)="buyCourse()" class="btn btn-primary btn-lg">
            –ë“Ø–≥–¥–∏–π–≥ —Ö—É–¥–∞–ª–¥–∞–∂ –∞–≤–∞—Ö
          </button>
        </div>
      </div>
    </ng-template>
  </div>
</div>
